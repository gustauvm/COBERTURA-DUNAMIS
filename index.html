<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#002D72">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Gerenciamento de Efetivos v3.9 - Grupo Dunamis</title>
    <link rel="icon" href="images/logo-dunamis-servicos.png">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
</head>
<body>

    <!-- HEADER -->
    <header>
        <div class="header-content">
            <button id="home-btn" class="home-btn" onclick="resetToGateway()" title="Home" aria-label="Home">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M3 9.5L12 3l9 6.5"></path>
                    <path d="M5 10.5V21h14V10.5"></path>
                    <path d="M9 21V14h6v7"></path>
                </svg>
            </button>
            <h1 id="app-title">Gerenciamento de Efetivos <span class="app-version">v3.9</span></h1>
            <button id="avisos-bell" class="avisos-bell hidden" onclick="toggleAvisosMini()" title="Avisos">
                <span class="bell-icon" aria-hidden="true">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M15 17h5l-1.4-1.4A2 2 0 0 1 18 14.2V11a6 6 0 1 0-12 0v3.2a2 2 0 0 1-.6 1.4L4 17h5"/>
                        <path d="M9.5 17a2.5 2.5 0 0 0 5 0"/>
                    </svg>
                </span>
                <span class="bell-badge hidden" id="avisos-badge">0</span>
            </button>
            <span id="shadow-indicator" class="shadow-indicator hidden">Shadow offline</span>
            <span id="auth-indicator" class="auth-indicator hidden"></span>
            <button class="compact-toggle" onclick="toggleCompactMode()" title="Modo compacto" aria-label="Modo compacto">Compacto</button>
        </div>
    </header>

    <!-- GATEWAY (Seleção de Grupo) -->
    <section id="gateway">
        <!-- Injetado via JS -->
    </section>

    <!-- APLICAÇÃO PRINCIPAL -->
    <main id="app-container">
        <div id="content-area">
            <!-- Dashboard (Abas) será injetado aqui -->
        </div>
        <div id="context-bar" class="context-bar hidden"></div>
    </main>

    <!-- Container de Notificações (Toast) -->
    <div id="toast-container" class="toast-container"></div>

    <div id="avisos-mini" class="avisos-mini hidden">
        <div class="avisos-mini-header">
            <strong>Avisos</strong>
            <button class="btn-mini btn-secondary" onclick="closeAvisosMini()">Fechar</button>
        </div>
        <div id="avisos-mini-list" class="avisos-mini-list"></div>
        <button class="btn btn-small" onclick="openAvisosTab()">Ver todos</button>
    </div>

    <div id="reminder-alerts" class="reminder-alerts hidden">
        <div class="reminder-alerts-header">
            <strong>Lembretes ativos</strong>
            <button class="btn-mini btn-secondary" onclick="dismissReminderAlerts()">Ocultar</button>
        </div>
        <div id="reminder-alerts-list" class="reminder-alerts-list"></div>
    </div>

    <!-- Botão Toggle Ações -->
    <button id="utility-toggle-btn" onclick="toggleUtilityButtons()" title="Ações rápidas" aria-label="Ações rápidas">
        <span class="utility-arrow">›</span>
    </button>

    <!-- Botão Imprimir -->
    <button id="print-view-btn" class="utility-btn" onclick="printCurrentView()" title="Imprimir visão atual" aria-label="Imprimir visão atual">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <polyline points="6 9 6 2 18 2 18 9"></polyline>
            <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
            <rect x="6" y="14" width="12" height="8"></rect>
        </svg>
    </button>

    <!-- Botão Ajuda -->
    <button id="help-btn" class="utility-btn" onclick="openHelpModal()" title="Ajuda rápida" aria-label="Ajuda rápida">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M9.09 9a3 3 0 0 1 5.82 1c0 2-3 2-3 4"></path>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
    </button>

    <!-- Botão Prompts -->
    <button id="prompts-btn" class="utility-btn" onclick="openPromptsModal()" title="Dicas de prompts" aria-label="Dicas de prompts">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M4 4h16v14H7l-3 3z"></path>
            <line x1="8" y1="8" x2="16" y2="8"></line>
            <line x1="8" y1="12" x2="14" y2="12"></line>
        </svg>
    </button>

    <!-- Botão Guia -->
    <button id="guide-btn" class="utility-btn" onclick="openGuideModal()" title="Guia completo" aria-label="Guia completo">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5V4.5A2.5 2.5 0 0 1 6.5 2z"></path>
        </svg>
    </button>

    <!-- Botão Scroll Top -->
    <button id="scroll-top-btn" onclick="scrollToTop()" title="Voltar ao topo">↑</button>

    <footer id="site-footer"></footer>

    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
